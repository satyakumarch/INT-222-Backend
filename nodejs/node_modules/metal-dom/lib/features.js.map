{"version":3,"sources":["../src/features.js"],"names":["features","animationEventName_","undefined","animation","checkAnimationEventName_","transition","type","prefixes","typeTitleCase","replaceInterval","substring","toUpperCase","suffixes","animationElement_","document","createElement","i","length","style","toLowerCase","attrOrderChange_","originalContent","element","innerHTML"],"mappings":"AAAA;;;;;;;;AAEA;;AACA;;;;AAEA;;;IAGMA,Q;;;;;;;;AACL;;;;;;4CAMiC;AAChC,OAAIA,SAASC,mBAAT,KAAiCC,SAArC,EAAgD;AAC/CF,aAASC,mBAAT,GAA+B;AAC9BE,gBAAWH,SAASI,wBAAT,CAAkC,WAAlC,CADmB;AAE9BC,iBAAYL,SAASI,wBAAT,CAAkC,YAAlC;AAFkB,KAA/B;AAIA;AACD,UAAOJ,SAASC,mBAAhB;AACA;;AAED;;;;;;;;2CAKgCK,I,EAAM;AACrC,OAAMC,WAAW,CAAC,QAAD,EAAW,IAAX,EAAiB,GAAjB,EAAsB,EAAtB,CAAjB;AACA,OAAMC,gBAAgB,cAAOC,eAAP,CACrBH,IADqB,EAErB,CAFqB,EAGrB,CAHqB,EAIrBA,KAAKI,SAAL,CAAe,CAAf,EAAkB,CAAlB,EAAqBC,WAArB,EAJqB,CAAtB;AAMA,OAAMC,WAAW,CACbJ,aADa,UAEbA,aAFa,UAGbA,aAHa,UAIbF,IAJa,SAAjB;AAMA,OAAI,CAACN,SAASa,iBAAd,EAAiC;AAChCb,aAASa,iBAAT,GAA6BC,SAASC,aAAT,CAAuB,KAAvB,CAA7B;AACA;AACD,QAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIT,SAASU,MAA7B,EAAqCD,GAArC,EAA0C;AACzC,QACChB,SAASa,iBAAT,CAA2BK,KAA3B,CACCX,SAASS,CAAT,IAAcR,aADf,MAEMN,SAHP,CAGiB;AAHjB,MAIE;AACD,aAAOK,SAASS,CAAT,EAAYG,WAAZ,KAA4BP,SAASI,CAAT,CAAnC;AACA;AACD;AACD,UAAUV,IAAV;AACA;;AAED;;;;;;;;;yCAM8B;AAC7B,OAAIN,SAASoB,gBAAT,KAA8BlB,SAAlC,EAA6C;AAC5C,QAAMmB,kBAAkB,2CAAxB;AACA,QAAMC,UAAUR,SAASC,aAAT,CAAuB,KAAvB,CAAhB;AACA,qBAAOO,OAAP,EAAgBD,eAAhB;AACArB,aAASoB,gBAAT,GAA4BC,oBAAoBC,QAAQC,SAAxD;AACA;AACD,UAAOvB,SAASoB,gBAAhB;AACA;;;;;;AAGFpB,SAASa,iBAAT,GAA6BX,SAA7B;AACAF,SAASC,mBAAT,GAA+BC,SAA/B;AACAF,SAASoB,gBAAT,GAA4BlB,SAA5B;;kBAEeF,Q","file":"features.js","sourcesContent":["'use strict';\n\nimport {append} from './dom';\nimport {string} from 'metal';\n\n/**\n * Class with static methods responsible for doing browser feature checks.\n */\nclass features {\n\t/**\n\t * Some browsers still supports prefixed animation events. This method can\n\t * be used to retrieve the current browser event name for both, animation\n\t * and transition.\n\t * @return {object}\n\t */\n\tstatic checkAnimationEventName() {\n\t\tif (features.animationEventName_ === undefined) {\n\t\t\tfeatures.animationEventName_ = {\n\t\t\t\tanimation: features.checkAnimationEventName_('animation'),\n\t\t\t\ttransition: features.checkAnimationEventName_('transition'),\n\t\t\t};\n\t\t}\n\t\treturn features.animationEventName_;\n\t}\n\n\t/**\n\t * @protected\n\t * @param {string} type Type to test: animation, transition.\n\t * @return {string} Browser event name.\n\t */\n\tstatic checkAnimationEventName_(type) {\n\t\tconst prefixes = ['Webkit', 'MS', 'O', ''];\n\t\tconst typeTitleCase = string.replaceInterval(\n\t\t\ttype,\n\t\t\t0,\n\t\t\t1,\n\t\t\ttype.substring(0, 1).toUpperCase()\n\t\t);\n\t\tconst suffixes = [\n\t\t\t`${typeTitleCase}End`,\n\t\t\t`${typeTitleCase}End`,\n\t\t\t`${typeTitleCase}End`,\n\t\t\t`${type}end`,\n\t\t];\n\t\tif (!features.animationElement_) {\n\t\t\tfeatures.animationElement_ = document.createElement('div');\n\t\t}\n\t\tfor (let i = 0; i < prefixes.length; i++) {\n\t\t\tif (\n\t\t\t\tfeatures.animationElement_.style[\n\t\t\t\t\tprefixes[i] + typeTitleCase\n\t\t\t\t] !== undefined // eslint-disable-line\n\t\t\t) {\n\t\t\t\treturn prefixes[i].toLowerCase() + suffixes[i];\n\t\t\t}\n\t\t}\n\t\treturn `${type}end`;\n\t}\n\n\t/**\n\t * Some browsers (like IE11, Edge) change the order of element attributes, when html\n\t * is rendered. This method can be used to check if this behavior happens on\n\t * the current browser.\n\t * @return {boolean}\n\t */\n\tstatic checkAttrOrderChange() {\n\t\tif (features.attrOrderChange_ === undefined) {\n\t\t\tconst originalContent = '<div data-component=\"\" data-ref=\"\"></div>';\n\t\t\tconst element = document.createElement('div');\n\t\t\tappend(element, originalContent);\n\t\t\tfeatures.attrOrderChange_ = originalContent !== element.innerHTML;\n\t\t}\n\t\treturn features.attrOrderChange_;\n\t}\n}\n\nfeatures.animationElement_ = undefined;\nfeatures.animationEventName_ = undefined;\nfeatures.attrOrderChange_ = undefined;\n\nexport default features;\n"]}