{"version":3,"sources":["../src/DomDelegatedEventHandle.js"],"names":["DomDelegatedEventHandle","emitter","event","listener","selector","selector_","delegating","get","emitter_","listeners","arr","event_","selectors","key","remove","listener_","length"],"mappings":"AAAA;;;;;;;;AAEA;;AACA;;;;AACA;;;;;;;;;;AAEA;;;;;IAKMA,uB;;;AACL;;;;;;;;;AASA,kCAAYC,OAAZ,EAAqBC,KAArB,EAA4BC,QAA5B,EAAsCC,QAAtC,EAAgD;AAAA;;AAAA,gJACzCH,OADyC,EAChCC,KADgC,EACzBC,QADyB;;AAE/C,QAAKE,SAAL,GAAiBD,QAAjB;AAF+C;AAG/C;;AAED;;;;;;;mCAGiB;AAChB,OAAME,aAAa,kBAAQC,GAAR,CAAY,KAAKC,QAAjB,EAA2B,YAA3B,EAAyC,EAAzC,CAAnB;AACA,OAAMC,YAAY,kBAAQF,GAAR,CAAY,KAAKC,QAAjB,EAA2B,WAA3B,EAAwC,EAAxC,CAAlB;AACA,OAAMJ,WAAW,KAAKC,SAAtB;AACA,OAAMK,MAAM,qBAASN,QAAT,IACTE,WAAW,KAAKK,MAAhB,EAAwBC,SADf,GAETH,SAFH;AAGA,OAAMI,MAAM,qBAAST,QAAT,IAAqBA,QAArB,GAAgC,KAAKO,MAAjD;;AAEA,gBAAMG,MAAN,CAAaJ,IAAIG,GAAJ,KAAY,EAAzB,EAA6B,KAAKE,SAAlC;AACA,OAAIL,IAAIG,GAAJ,KAAYH,IAAIG,GAAJ,EAASG,MAAT,KAAoB,CAApC,EAAuC;AACtC,WAAON,IAAIG,GAAJ,CAAP;AACA;AACD;;;;;;kBAGab,uB","file":"DomDelegatedEventHandle.js","sourcesContent":["'use strict';\n\nimport {array, isString} from 'metal';\nimport domData from './domData';\nimport {EventHandle} from 'metal-events';\n\n/**\n * This is a special EventHandle, that is responsible for dom delegated events\n * (only the ones that receive a target element, not a selector string).\n * @extends {EventHandle}\n */\nclass DomDelegatedEventHandle extends EventHandle {\n\t/**\n\t * The constructor for `DomDelegatedEventHandle`.\n\t * @param {!Event} emitter Element the event was subscribed to.\n\t * @param {string} event The name of the event that was subscribed to.\n\t * @param {!Function} listener The listener subscribed to the event.\n\t * @param {string=} selector An optional selector used when delegating\n\t *     the event.\n\t * @constructor\n\t */\n\tconstructor(emitter, event, listener, selector) {\n\t\tsuper(emitter, event, listener);\n\t\tthis.selector_ = selector;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tremoveListener() {\n\t\tconst delegating = domData.get(this.emitter_, 'delegating', {});\n\t\tconst listeners = domData.get(this.emitter_, 'listeners', {});\n\t\tconst selector = this.selector_;\n\t\tconst arr = isString(selector)\n\t\t\t? delegating[this.event_].selectors\n\t\t\t: listeners;\n\t\tconst key = isString(selector) ? selector : this.event_;\n\n\t\tarray.remove(arr[key] || [], this.listener_);\n\t\tif (arr[key] && arr[key].length === 0) {\n\t\t\tdelete arr[key];\n\t\t}\n\t}\n}\n\nexport default DomDelegatedEventHandle;\n"]}